{"ast":null,"code":"import _regeneratorRuntime from \"/home/user/MAD2_project/housing-services-v2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/user/MAD2_project/housing-services-v2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { useAuthStore } from '@/store/auth';\nimport { useRouter } from 'vue-router';\nimport { ref, onMounted } from 'vue';\nimport api from '@/api';\nexport default {\n  setup: function setup() {\n    var store = useAuthStore();\n    var router = useRouter();\n    var username = ref('');\n    var password = ref('');\n    var showPassword = ref(false);\n    var passwordInput = ref(null);\n    onMounted(function () {\n      passwordInput.value = document.querySelector('#passwordInput');\n    });\n    var togglePasswordVisibility = function togglePasswordVisibility() {\n      showPassword.value = !showPassword.value;\n      // Small delay to avoid reactivity issues\n      if (passwordInput.value) {\n        passwordInput.value.focus(); // Ensure focus remains on input\n      }\n    };\n    var login = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response, token;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return api.get('/login');\n            case 3:\n              response = _context.sent;\n              // Store the token\n              token = response.data.access_token;\n              localStorage.setItem('token', token);\n\n              // Set token in headers for future requests\n              api.defaults.headers.common['Authorization'] = \"Bearer \".concat(token);\n              store.login({\n                role: response.data.role,\n                token: response.data.access_token\n              });\n              router.push(\"/\".concat(response.data.role, \"/dashboard\"));\n              _context.next = 14;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              alert('Invalid credentials');\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n      return function login() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    return {\n      username: username,\n      password: password,\n      login: login,\n      showPassword: showPassword,\n      togglePasswordVisibility: togglePasswordVisibility\n    };\n  }\n};","map":{"version":3,"names":["useAuthStore","useRouter","ref","onMounted","api","setup","store","router","username","password","showPassword","passwordInput","value","document","querySelector","togglePasswordVisibility","focus","login","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","token","wrap","_callee$","_context","prev","next","get","sent","data","access_token","localStorage","setItem","defaults","headers","common","concat","role","push","t0","alert","stop","apply","arguments"],"sources":["/home/user/MAD2_project/housing-services-v2/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex align-items-center justify-content-center min-vh-100 bg-light\">\n    <div class=\"card login-card shadow-lg p-4\">\n      <h3 class=\"text-center text-dark mb-3\" style=\"font-family:'Lato', Arial, sans-serif; font-weight: 300; font-size: 1.75rem;\">Sign In</h3>\n      <form @submit.prevent=\"login\">\n        <div class=\"form-group\">\n          <div class=\"icon d-flex align-items-center justify-content-center\">\n            <span class=\"fa fa-user\"></span>\n          </div>\n          <input v-model=\"username\" type=\"text\" class=\"form-control\" placeholder=\"Username\" required />\n        </div>\n        <div class=\"form-group\">\n          <div class=\"icon d-flex align-items-center justify-content-center\">\n            <span class=\"fa fa-lock\"></span>\n          </div>\n          <input id = \"passwordInput\" v-model=\"password\" :type=\"showPassword ? 'text' : 'password'\" class=\"form-control\" placeholder=\"Password\" required />\n          <span class=\"input-group-text password-toggle\" @click=\"togglePasswordVisibility\">\n            <i :class=\"showPassword ? 'fa fa-eye' : 'fa fa-eye-slash'\"></i>\n          </span>       \n        </div>\n        <button type=\"submit\" class=\"btn btn-success w-100 py-2\">Login</button>\n      </form>\n      <div class=\"form-group mt-4\">\n        <div class=\"w-100 text-center\">\n          <p class=\"mb-1\">Don't have an account? <a href=\"#\">Sign Up</a></p>\n          <p><a href=\"#\">Forgot Password</a></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useAuthStore } from '@/store/auth';\nimport { useRouter } from 'vue-router';\nimport { ref, onMounted } from 'vue';\nimport api from '@/api';\n\nexport default {\n  setup() {\n    const store = useAuthStore();\n    const router = useRouter();\n    const username = ref('');\n    const password = ref('');\n\n    const showPassword = ref(false);\n    const passwordInput = ref(null);\n    \n    onMounted(() => {\n      passwordInput.value = document.querySelector('#passwordInput');\n    });\n\n    const togglePasswordVisibility = () => {\n      showPassword.value = !showPassword.value;\n      // Small delay to avoid reactivity issues\n        if (passwordInput.value) {\n          passwordInput.value.focus(); // Ensure focus remains on input\n        }\n    };\n\n    const login = async () => {\n      try {\n        const response = await api.get('/login');\n\n        // Store the token\n        const token = response.data.access_token;\n        localStorage.setItem('token', token);\n\n        // Set token in headers for future requests\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        store.login({ role: response.data.role, token: response.data.access_token });\n        router.push(`/${response.data.role}/dashboard`);\n      } catch (error) {\n        alert('Invalid credentials');\n      }\n    };\n\n    return { username, password, login, showPassword, togglePasswordVisibility };\n  }\n};\n</script>\n\n<style>\n* {\n  font-family: \"Lato\", Arial, sans-serif;\n  font-size: 16px;\n  line-height: 1.8;\n  font-weight: normal;\n  color: gray;\n}\n\n.bg-light {\n  background-color: #f8f9fa;\n}\n\n.login-card {\n  width: 25rem;\n  border-radius: 10px;\n  background: #fff;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n  padding: 2rem;\n  text-align: center;\n}\n\n.form-control {\n  border-left: none;\n  height: 48px;\n}\n\n.btn-success {\n  background-color: #483434;\n  border: none;\n  font-weight: bold;\n}\n\n.btn-success:hover {\n  background-color: #6B4F4F;\n}\n\n.form-group {\n  position: relative; \n  margin-bottom: 1rem;\n}\n\n  .form-group .icon {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 48px;\n    height: 48px;\n    background: #483434;\n    font-size: 20px;\n    border-radius: 5px 0 0 5px; }\n    .form-group .icon span {\n      color: #fff; }\n      .form-control {\n  height: 48px;\n  background: #fff;\n  color: #000;\n  font-size: 16px;\n  border-radius: 5px;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  padding-left: 60px; }\n\n  .form-control:focus, .form-control:active {\n    outline: none !important;\n    -webkit-box-shadow: none;\n    box-shadow: none;\n    border: 1px solid #483434; }\n\n    a {\n  transition: .3s all ease;\n  color: #483434; \n  text-decoration: none; }\n  a:hover, a:focus {\n    color: #007bff; }\n\n    .password-toggle {\n  cursor: pointer;\n  background: white;\n  border: none;\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  padding: 5px;\n  font-size: 1.3rem;\n}\n</style>\n"],"mappings":";;;AAiCA,SAASA,YAAW,QAAS,cAAc;AAC3C,SAASC,SAAQ,QAAS,YAAY;AACtC,SAASC,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,OAAOC,GAAE,MAAO,OAAO;AAEvB,eAAe;EACbC,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,KAAI,GAAIN,YAAY,CAAC,CAAC;IAC5B,IAAMO,MAAK,GAAIN,SAAS,CAAC,CAAC;IAC1B,IAAMO,QAAO,GAAIN,GAAG,CAAC,EAAE,CAAC;IACxB,IAAMO,QAAO,GAAIP,GAAG,CAAC,EAAE,CAAC;IAExB,IAAMQ,YAAW,GAAIR,GAAG,CAAC,KAAK,CAAC;IAC/B,IAAMS,aAAY,GAAIT,GAAG,CAAC,IAAI,CAAC;IAE/BC,SAAS,CAAC,YAAM;MACdQ,aAAa,CAACC,KAAI,GAAIC,QAAQ,CAACC,aAAa,CAAC,gBAAgB,CAAC;IAChE,CAAC,CAAC;IAEF,IAAMC,wBAAuB,GAAI,SAA3BA,wBAAuBA,CAAA,EAAU;MACrCL,YAAY,CAACE,KAAI,GAAI,CAACF,YAAY,CAACE,KAAK;MACxC;MACE,IAAID,aAAa,CAACC,KAAK,EAAE;QACvBD,aAAa,CAACC,KAAK,CAACI,KAAK,CAAC,CAAC,EAAE;MAC/B;IACJ,CAAC;IAED,IAAMC,KAAI;MAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAI,SAAAC,QAAA;QAAA,IAAAC,QAAA,EAAAC,KAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEazB,GAAG,CAAC0B,GAAG,CAAC,QAAQ,CAAC;YAAA;cAAlCP,QAAO,GAAAI,QAAA,CAAAI,IAAA;cAEb;cACMP,KAAI,GAAID,QAAQ,CAACS,IAAI,CAACC,YAAY;cACxCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEX,KAAK,CAAC;;cAEpC;cACApB,GAAG,CAACgC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,cAAAC,MAAA,CAAcf,KAAK,CAAE;cAEhElB,KAAK,CAACW,KAAK,CAAC;gBAAEuB,IAAI,EAAEjB,QAAQ,CAACS,IAAI,CAACQ,IAAI;gBAAEhB,KAAK,EAAED,QAAQ,CAACS,IAAI,CAACC;cAAa,CAAC,CAAC;cAC5E1B,MAAM,CAACkC,IAAI,KAAAF,MAAA,CAAKhB,QAAQ,CAACS,IAAI,CAACQ,IAAI,eAAY,CAAC;cAAAb,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAe,EAAA,GAAAf,QAAA;cAE/CgB,KAAK,CAAC,qBAAqB,CAAC;YAAA;YAAA;cAAA,OAAAhB,QAAA,CAAAiB,IAAA;UAAA;QAAA,GAAAtB,OAAA;MAAA,CAE/B;MAAA,gBAhBKL,KAAIA,CAAA;QAAA,OAAAC,IAAA,CAAA2B,KAAA,OAAAC,SAAA;MAAA;IAAA,GAgBT;IAED,OAAO;MAAEtC,QAAQ,EAARA,QAAQ;MAAEC,QAAQ,EAARA,QAAQ;MAAEQ,KAAK,EAALA,KAAK;MAAEP,YAAY,EAAZA,YAAY;MAAEK,wBAAuB,EAAvBA;IAAyB,CAAC;EAC9E;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}